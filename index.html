<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æˆ‘çš„è¥å…»å°ç®¡å®¶</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
}
:root {
  --main: #ff7b9c;
  --light: #fff0f5;
  --border: #f0cde0;
}
body {
  background: #fdf6f9;
  color: #333;
  padding: 1rem;
  max-width: 768px;
  margin: 0 auto;
  position: relative;
}
body::before {
  content: "ğŸ";
  position: fixed;
  top: 5%;
  left: 5%;
  font-size: 2rem;
  opacity: 0.2;
  z-index: -1;
}
body::after {
  content: "ğŸ¥¦";
  position: fixed;
  bottom: 10%;
  right: 8%;
  font-size: 2.2rem;
  opacity: 0.2;
  z-index: -1;
}
.login-mask {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(255,255,255,0.95);
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}
.login-box {
  background: white;
  width: 100%;
  max-width: 380px;
  padding: 2rem 1.5rem;
  border-radius: 20px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.08);
  text-align: center;
}
.login-box h2 {
  color: var(--main);
  margin-bottom: 1.5rem;
  font-size: 1.4rem;
}
.login-input {
  width: 100%;
  padding: 0.9rem;
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-bottom: 1rem;
  font-size: 1rem;
  outline: none;
}
.login-input:focus {
  border-color: var(--main);
}
.code-row {
  display: flex;
  gap: 0.6rem;
}
.code-row input {
  flex: 1;
}
.btn {
  width: 100%;
  padding: 0.9rem;
  border: none;
  border-radius: 12px;
  background: var(--main);
  color: white;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  margin-top: 0.5rem;
}
.btn:hover {
  filter: brightness(0.9);
}
.btn-outline {
  background: transparent;
  border: 1px solid var(--main);
  color: var(--main);
}
.btn-outline:hover {
  background: var(--light);
}
.header {
  text-align: center;
  margin: 1rem 0 1.5rem;
}
.header h1 {
  color: var(--main);
  font-size: 1.7rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}
.header h1::before {
  content: "ğŸ½ï¸";
  font-size: 1.8rem;
}
.user-bar {
  text-align: right;
  margin-bottom: 1rem;
  font-size: 0.9rem;
  color: #666;
}
.user-bar span {
  color: var(--main);
  font-weight: 500;
}
.tabbar {
  display: flex;
  background: white;
  border-radius: 16px;
  overflow: hidden;
  margin-bottom: 1rem;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}
.tab {
  flex: 1;
  text-align: center;
  padding: 0.9rem 0.5rem;
  font-size: 0.95rem;
  cursor: pointer;
  color: #666;
}
.tab.active {
  background: var(--main);
  color: white;
}
.card {
  background: white;
  border-radius: 16px;
  padding: 1.2rem;
  margin-bottom: 1rem;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  position: relative;
}
.card-profile::before { content: "ğŸ‘¤"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card-target::before { content: "ğŸ“Š"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card-meal::before { content: "ğŸ½ï¸"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card-search::before { content: "ğŸ”"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card-food::before { content: "ğŸ¥—"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card-total::before { content: "ğŸ“ˆ"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card-weight::before { content: "âš–ï¸"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card-report::before { content: "ğŸ“„"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card-recipe::before { content: "ğŸ±"; opacity: 0.15; position: absolute; top: 10px; right: 12px; font-size: 1.5rem; }
.card h2 {
  font-size: 1.15rem;
  margin-bottom: 1rem;
  color: #444;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}
.card h2::before {
  content: "â€¢";
  color: var(--main);
  font-size: 1.3rem;
}
.form-row {
  display: flex;
  gap: 0.6rem;
  margin-bottom: 0.9rem;
  flex-wrap: wrap;
}
.form-row input,
.form-row select {
  flex: 1;
  min-width: 100px;
  padding: 0.8rem;
  border: 1px solid var(--border);
  border-radius: 12px;
  font-size: 0.95rem;
  outline: none;
}
.form-row input:focus,
.form-row select:focus {
  border-color: var(--main);
}
.btn-mini {
  padding: 0.6rem 0.9rem;
  font-size: 0.9rem;
  border-radius: 10px;
  border: none;
  background: var(--main);
  color: white;
  cursor: pointer;
}
.btn-mini.danger {
  background: #ff6b6b;
}
.info-row {
  font-size: 0.95rem;
  margin-bottom: 0.5rem;
  color: #555;
}
.nutri-row {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  font-size: 0.95rem;
  color: #666;
  margin: 0.8rem 0;
}
.suggest {
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-top: 0.7rem;
  max-height: 200px;
  overflow-y: auto;
}
.suggest-item {
  padding: 0.8rem;
  border-bottom: 1px solid var(--light);
  cursor: pointer;
  font-size: 0.95rem;
}
.suggest-item:hover {
  background: var(--light);
}
.suggest-item:last-child {
  border-bottom: none;
}
.fav-list {
  margin-top: 0.7rem;
}
.fav-item {
  display: flex;
  justify-content: space-between;
  padding: 0.7rem 0;
  border-bottom: 1px dashed var(--border);
  font-size: 0.95rem;
}
.fav-item .del {
  color: #ff6b6b;
  cursor: pointer;
  font-weight: bold;
}
.meal-list .item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.7rem 0;
  border-bottom: 1px dashed var(--border);
  font-size: 0.95rem;
}
.progress-item {
  margin-bottom: 1rem;
}
.progress-item .text {
  font-size: 0.95rem;
  margin-bottom: 0.4rem;
  color: #555;
}
.progress-bar {
  width: 100%;
  height: 10px;
  background: var(--light);
  border-radius: 5px;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  background: var(--main);
  border-radius: 5px;
}
.meal-compare {
  margin-bottom: 0.9rem;
}
.meal-compare .text {
  font-size: 0.95rem;
  margin-bottom: 0.4rem;
  color: #555;
}
canvas {
  width: 100%;
  height: 190px;
  border-radius: 12px;
  margin-top: 0.7rem;
  background: #fdf6f9;
}
.history-item {
  display: flex;
  justify-content: space-between;
  padding: 0.7rem 0;
  border-bottom: 1px dashed var(--border);
  font-size: 0.95rem;
}
.report {
  white-space: pre-line;
  font-size: 0.95rem;
  line-height: 1.6;
  background: #fdf6f9;
  padding: 1.2rem;
  border-radius: 12px;
  margin-top: 0.8rem;
  color: #444;
}
.recipe-item {
  padding: 1rem;
  border-bottom: 1px dashed var(--border);
}
.recipe-item:last-child {
  border-bottom: none;
}
.recipe-item h3 {
  font-size: 1.05rem;
  margin-bottom: 0.5rem;
  color: var(--main);
}
.recipe-item p {
  font-size: 0.95rem;
  color: #555;
  line-height: 1.5;
}
.tab-content {
  display: none;
}
.tab-content.show {
  display: block;
}
.theme-grid {
  display: grid;
  grid-template-columns: repeat(4,1fr);
  gap: 0.5rem;
  margin: 0.8rem 0;
}
.theme-btn {
  padding: 0.6rem 0.2rem;
  border-radius: 8px;
  border: none;
  color: white;
  font-size: 0.8rem;
  cursor: pointer;
}
.icon-preview {
  width: 60px;
  height: 60px;
  border-radius: 12px;
  background: var(--light);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  margin: 0.8rem 0;
}
</style>
</head>
<body>

<div class="login-mask" id="loginMask">
  <div class="login-box">
    <h2>æˆ‘çš„è¥å…»å°ç®¡å®¶ ğŸ”</h2>
    <input type="tel" class="login-input" id="phone" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" maxlength="11">
    <div class="code-row">
      <input type="text" class="login-input" id="code" placeholder="éªŒè¯ç " maxlength="6">
      <button class="btn btn-outline" onclick="sendCode()" id="codeBtn">è·å–éªŒè¯ç </button>
    </div>
    <button class="btn" onclick="login()">ç™»å½• / æ³¨å†Œ</button>
  </div>
</div>

<div class="header">
  <h1 id="appTitle">æˆ‘çš„è¥å…»å°ç®¡å®¶</h1>
</div>
<div class="user-bar" id="userBar" style="display:none">
  æ¬¢è¿ï¼Œ<span id="userPhone"></span> | <a href="javascript:logout()" style="color:var(--main)">é€€å‡º</a>
</div>

<div class="tabbar">
  <div class="tab active" onclick="switchTab('diet')">é¥®é£Ÿè®°å½•</div>
  <div class="tab" onclick="switchTab('weight')">ä½“é‡å›¾è¡¨</div>
  <div class="tab" onclick="switchTab('report')">è¥å…»æŠ¥å‘Š</div>
  <div class="tab" onclick="switchTab('recipe')">é£Ÿè°±æ¨è</div>
</div>

<div id="diet" class="tab-content show">
  <div class="card card-profile">
    <h2>ğŸ‘¤ ä¸ªäººä¿¡æ¯</h2>
    <div class="form-row">
      <select id="gender">
        <option value="male">ç”·</option>
        <option value="female">å¥³</option>
      </select>
      <input type="number" id="age" placeholder="å¹´é¾„" value="25">
      <input type="number" id="height" placeholder="èº«é«˜(cm)" value="165">
      <input type="number" id="weight" placeholder="ä½“é‡(kg)" value="55">
    </div>
    <div class="form-row">
      <select id="activity">
        <option value="1.2">ä¹…å</option>
        <option value="1.375">è½»åº¦æ´»åŠ¨</option>
        <option value="1.55">ä¸­åº¦æ´»åŠ¨</option>
        <option value="1.725">é«˜åº¦æ´»åŠ¨</option>
        <option value="1.9">æé«˜æ´»åŠ¨</option>
      </select>
      <select id="mode">
        <option value="maintain">ç»´æŒ</option>
        <option value="lose">å‡è„‚</option>
        <option value="gain">å¢è‚Œ</option>
        <option value="pregnant">å­•å¦‡</option>
      </select>
    </div>
    <button class="btn" onclick="calcTarget()">è®¡ç®—æ¨èæ‘„å…¥</button>
  </div>

  <div class="card card-target" id="targetCard" style="display:none">
    <h2>ğŸ“Š æ¯æ—¥æ¨èç›®æ ‡</h2>
    <div class="info-row">åŸºç¡€ä»£è°¢ BMRï¼š<span id="bmr">0</span> kcal</div>
    <div class="info-row">æ¯æ—¥æ¶ˆè€— TDEEï¼š<span id="tdee">0</span> kcal</div>
    <div class="info-row">æ¨èçƒ­é‡ï¼š<span id="targetCal">0</span> kcal</div>
    <div class="info-row">è›‹ç™½è´¨ï¼š<span id="targetPro">0</span> g</div>
    <div class="info-row">è„‚è‚ªï¼š<span id="targetFat">0</span> g</div>
    <div class="info-row">ç¢³æ°´ï¼š<span id="targetCar">0</span> g</div>
  </div>

  <div class="card card-meal" id="mealSplitCard" style="display:none">
    <h2>ğŸ½ï¸ æ¯é¤åˆ†é… & æ‘„å…¥å¯¹æ¯”</h2>
    <div class="meal-compare">
      <div class="text">æ—©é¤ï¼š<span id="breakfastTotal">0</span> / <span id="breakfastTarget">0</span> kcal</div>
      <div class="progress-bar"><div class="progress-fill" id="breakfastPer" style="width:0%"></div></div>
    </div>
    <div class="meal-compare">
      <div class="text">åˆé¤ï¼š<span id="lunchTotal">0</span> / <span id="lunchTarget">0</span> kcal</div>
      <div class="progress-bar"><div class="progress-fill" id="lunchPer" style="width:0%"></div></div>
    </div>
    <div class="meal-compare">
      <div class="text">æ™šé¤ï¼š<span id="dinnerTotal">0</span> / <span id="dinnerTarget">0</span> kcal</div>
      <div class="progress-bar"><div class="progress-fill" id="dinnerPer" style="width:0%"></div></div>
    </div>
    <div class="meal-compare">
      <div class="text">åŠ é¤ï¼š<span id="snackTotal">0</span> / <span id="snackTarget">0</span> kcal</div>
      <div class="progress-bar"><div class="progress-fill" id="snackPer" style="width:0%"></div></div>
    </div>
  </div>

  <div class="card card-search">
    <h2>ğŸ” é£Ÿç‰©æœç´¢ï¼ˆ300+åº“ï¼‰</h2>
    <div class="form-row">
      <input type="text" id="searchFood" placeholder="è¾“å…¥é£Ÿç‰©å" oninput="onSearchInput()">
      <button class="btn-mini" onclick="fillFood()">å¡«å……</button>
      <button class="btn-mini" onclick="toggleFav()">æ”¶è—</button>
    </div>
    <div id="suggest" class="suggest" style="display:none"></div>
    <div id="favList" class="fav-list" style="display:none"></div>
  </div>

  <div class="card card-food">
    <h2>ğŸ¥— é£Ÿç‰©å½•å…¥</h2>
    <div class="form-row">
      <input type="number" id="foodGram" placeholder="é‡é‡(g)" value="100">
    </div>
    <div class="nutri-row">
      <span>çƒ­é‡ï¼š<span id="foodCal">0</span> kcal</span>
      <span>è›‹ç™½ï¼š<span id="foodPro">0</span> g</span>
      <span>è„‚è‚ªï¼š<span id="foodFat">0</span> g</span>
      <span>ç¢³æ°´ï¼š<span id="foodCar">0</span> g</span>
    </div>
    <div class="form-row">
      <button class="btn-mini" onclick="addMeal('breakfast')">åŠ æ—©é¤</button>
      <button class="btn-mini" onclick="addMeal('lunch')">åŠ åˆé¤</button>
      <button class="btn-mini" onclick="addMeal('dinner')">åŠ æ™šé¤</button>
      <button class="btn-mini" onclick="addMeal('snack')">åŠ åŠ é¤</button>
      <button class="btn-mini" onclick="addFav()">æ”¶è—å½“å‰</button>
    </div>
  </div>

  <div class="card">
    <h2>ğŸ¥ æ—©é¤</h2>
    <div id="breakfastList" class="meal-list"></div>
  </div>
  <div class="card">
    <h2>ğŸ± åˆé¤</h2>
    <div id="lunchList" class="meal-list"></div>
  </div>
  <div class="card">
    <h2>ğŸ² æ™šé¤</h2>
    <div id="dinnerList" class="meal-list"></div>
  </div>
  <div class="card">
    <h2>ğŸ åŠ é¤</h2>
    <div id="snackList" class="meal-list"></div>
  </div>

  <div class="card card-total" id="totalCard" style="display:none">
    <h2>ğŸ“ˆ ä»Šæ—¥æ‘„å…¥ / ç›®æ ‡</h2>
    <div class="progress-item">
      <div class="text">çƒ­é‡ï¼š<span id="totalCal">0</span> / <span id="totalCalTarget">0</span> kcal</div>
      <div class="progress-bar"><div class="progress-fill" id="totalCalPer" style="width:0%"></div></div>
    </div>
    <div class="progress-item">
      <div class="text">è›‹ç™½è´¨ï¼š<span id="totalPro">0</span> / <span id="totalProTarget">0</span> g</div>
      <div class="progress-bar"><div class="progress-fill" id="totalProPer" style="width:0%"></div></div>
    </div>
    <div class="progress-item">
      <div class="text">è„‚è‚ªï¼š<span id="totalFat">0</span> / <span id="totalFatTarget">0</span> g</div>
      <div class="progress-bar"><div class="progress-fill" id="totalFatPer" style="width:0%"></div></div>
    </div>
    <div class="progress-item">
      <div class="text">ç¢³æ°´ï¼š<span id="totalCar">0</span> / <span id="totalCarTarget">0</span> g</div>
      <div class="progress-bar"><div class="progress-fill" id="totalCarPer" style="width:0%"></div></div>
    </div>
  </div>

  <div class="card">
    <h2>ğŸ¨ æˆ‘çš„ä¸“å±è®¾ç½®</h2>
    <div class="form-row">
      <input type="text" id="customName" class="login-input" placeholder="è‡ªå®šä¹‰æˆ‘çš„ç¨‹åºåç§°" style="flex:1">
      <button class="btn-mini" onclick="saveCustomName()">ä¿å­˜åç§°</button>
    </div>
    <div class="theme-grid">
      <button class="theme-btn" style="background:#ff7b9c" onclick="setTheme('#ff7b9c','#fff0f5','#f0cde0')">æ¨±èŠ±ç²‰</button>
      <button class="theme-btn" style="background:#64a6f7" onclick="setTheme('#64a6f7','#e8f3ff','#c6dcf7')">å¤©ç©ºè“</button>
      <button class="theme-btn" style="background:#62d9b0" onclick="setTheme('#62d9b0','#e6fffa','#b9e9d9')">è–„è·ç»¿</button>
      <button class="theme-btn" style="background:#b986d9" onclick="setTheme('#b986d9','#f5f0ff','#e0d1f7')">é¦™èŠ‹ç´«</button>
      <button class="theme-btn" style="background:#ff9f69" onclick="setTheme('#ff9f69','#fff4e8','#f7d9c6')">æ´»åŠ›æ©™</button>
      <button class="theme-btn" style="background:#ffd166" onclick="setTheme('#ffd166','#fff9e6','#f7e6b9')">æŸ æª¬é»„</button>
      <button class="theme-btn" style="background:#e85c6c" onclick="setTheme('#e85c6c','#ffe8eb','#f7c6ce')">è±†æ²™çº¢</button>
      <button class="theme-btn" style="background:#738ba9" onclick="setTheme('#738ba9','#eef2f7','#c6d1e0')">é›¾éœ¾è“</button>
    </div>
    <div style="display:flex;align-items:center;gap:1rem">
      <div class="icon-preview" id="iconPreview">ğŸ½ï¸</div>
      <button class="btn-mini" onclick="switchIcon()">åˆ‡æ¢å›¾æ ‡</button>
    </div>
  </div>

  <button class="btn" onclick="exportExcel()" style="background:#28a745;margin-bottom:0.5rem">ğŸ“Š å¯¼å‡ºä»Šæ—¥é¥®é£Ÿ Excel</button>
  <button class="btn danger" onclick="clearAll()" style="margin-bottom:2rem">æ¸…ç©ºä»Šæ—¥è®°å½•</button>
</div>

<div id="weight" class="tab-content">
  <div class="card card-weight">
    <h2>âœï¸ ä»Šæ—¥ä½“é‡</h2>
    <div class="form-row">
      <input type="number" step="0.1" id="todayWeight" placeholder="ä½“é‡(kg)">
      <button class="btn" onclick="saveWeight()">ä¿å­˜</button>
    </div>
  </div>
  <div class="card">
    <h2>ğŸ“… ä½“é‡è¶‹åŠ¿ï¼ˆè¿‘30å¤©ï¼‰</h2>
    <canvas id="weightChart"></canvas>
  </div>
  <div class="card">
    <h2>ğŸ“‹ å†å²è®°å½•</h2>
    <div id="weightHistory"></div>
  </div>
</div>

<div id="report" class="tab-content">
  <div class="card card-report">
    <h2>ğŸ“„ ä»Šæ—¥è¥å…»åˆ†ææŠ¥å‘Š</h2>
    <div id="reportContent" class="report">è¯·å…ˆè®¡ç®—ç›®æ ‡å¹¶è®°å½•é¥®é£Ÿ</div>
    <button class="btn" onclick="genReport()">ç”ŸæˆæŠ¥å‘Š</button>
  </div>
</div>

<div id="recipe" class="tab-content">
  <div class="card card-recipe">
    <h2>ğŸ± ä¸ªæ€§åŒ–é£Ÿè°±æ¨è</h2>
    <div id="recipeList"></div>
    <button class="btn" onclick="genRecipe()">åˆ·æ–°æ¨è</button>
  </div>
</div>

<script>
const FOOD_DB = {
  "ç™½ç±³é¥­": { cal: 116, pro: 2.6, fat: 0.3, car: 25.9 },
  "ç³™ç±³é¥­": { cal: 110, pro: 2.6, fat: 0.9, car: 23.8 },
  "é¦’å¤´": { cal: 223, pro: 7.0, fat: 1.1, car: 45.7 },
  "é¢æ¡": { cal: 110, pro: 2.7, fat: 0.2, car: 23.5 },
  "é¸¡èƒ¸è‚‰": { cal: 118, pro: 23.1, fat: 2.2, car: 0 },
  "ç˜¦ç‰›è‚‰": { cal: 125, pro: 20.2, fat: 4.2, car: 1.3 },
  "é¸¡è›‹": { cal: 143, pro: 12.6, fat: 9.9, car: 1.5 },
  "ä¸‰æ–‡é±¼": { cal: 142, pro: 20.8, fat: 6.3, car: 0 },
  "ç‰›å¥¶": { cal: 54, pro: 3.2, fat: 3.2, car: 3.4 },
  "æ— ç³–é…¸å¥¶": { cal: 72, pro: 4.0, fat: 1.5, car: 7.0 },
  "è±†è…": { cal: 76, pro: 8.1, fat: 4.8, car: 2.8 },
  "è‹¹æœ": { cal: 52, pro: 0.3, fat: 0.2, car: 13.8 },
  "é¦™è•‰": { cal: 89, pro: 1.1, fat: 0.3, car: 22.8 },
  "è¥¿å…°èŠ±": { cal: 34, pro: 2.8, fat: 0.4, car: 6.6 },
  "è èœ": { cal: 23, pro: 2.9, fat: 0.4, car: 3.6 },
  "çº¢è–¯": { cal: 86, pro: 1.6, fat: 0.1, car: 20.1 },
  "åœŸè±†": { cal: 77, pro: 2.0, fat: 0.2, car: 17.2 },
  "ç•ªèŒ„": { cal: 18, pro: 0.9, fat: 0.2, car: 3.9 },
  "é»„ç“œ": { cal: 15, pro: 0.6, fat: 0.2, car: 2.9 },
  "æä»": { cal: 579, pro: 21.1, fat: 49.9, car: 14.3 },
  "æ ¸æ¡ƒ": { cal: 654, pro: 15.2, fat: 65.2, car: 13.9 },
  "ç‡•éº¦ç‰‡": { cal: 389, pro: 13.2, fat: 6.9, car: 66.9 },
  "ç‰ç±³": { cal: 96, pro: 3.4, fat: 1.5, car: 19.0 },
  "å°ç±³ç²¥": { cal: 46, pro: 1.2, fat: 0.3, car: 9.4 },
  "å…¨éº¦é¢åŒ…": { cal: 250, pro: 9.0, fat: 3.5, car: 44.0 },
  "ç˜¦çŒªè‚‰": { cal: 143, pro: 20.3, fat: 6.2, car: 0 },
  "é²ˆé±¼": { cal: 105, pro: 18.6, fat: 3.4, car: 0 },
  "è™¾ä»": { cal: 80, pro: 16.0, fat: 1.0, car: 1.0 },
  "ç™½èœ": { cal: 13, pro: 1.2, fat: 0.2, car: 2.4 },
  "èŠ¹èœ": { cal: 14, pro: 0.8, fat: 0.1, car: 2.1 },
  "ç”Ÿèœ": { cal: 15, pro: 1.0, fat: 0.2, car: 2.0 },
  "å†¬ç“œ": { cal: 12, pro: 0.4, fat: 0.2, car: 2.6 },
  "è‹¦ç“œ": { cal: 19, pro: 1.0, fat: 0.2, car: 3.5 },
  "èŒ„å­": { cal: 25, pro: 1.1, fat: 0.2, car: 5.0 },
  "èƒ¡èåœ": { cal: 39, pro: 0.9, fat: 0.3, car: 8.8 },
  "å—ç“œ": { cal: 26, pro: 0.7, fat: 0.1, car: 5.3 },
  "æ¢¨": { cal: 57, pro: 0.3, fat: 0.2, car: 14.0 },
  "æ©™å­": { cal: 47, pro: 0.9, fat: 0.2, car: 11.0 },
  "è‘¡è„": { cal: 69, pro: 0.6, fat: 0.2, car: 17.0 },
  "è‰è“": { cal: 32, pro: 0.7, fat: 0.3, car: 7.0 },
  "è“è“": { cal: 57, pro: 0.7, fat: 0.3, car: 14.0 },
  "èŠ’æœ": { cal: 65, pro: 0.6, fat: 0.4, car: 15.0 },
  "æœ¨ç“œ": { cal: 39, pro: 0.5, fat: 0.1, car: 9.8 },
  "æŸšå­": { cal: 38, pro: 0.8, fat: 0.1, car: 9.0 },
  "çŒ•çŒ´æ¡ƒ": { cal: 61, pro: 1.1, fat: 0.5, car: 14.0 },
  "ç«é¾™æœ": { cal: 55, pro: 1.1, fat: 0.2, car: 13.0 },
  "æ¨±æ¡ƒ": { cal: 50, pro: 1.1, fat: 0.3, car: 11.0 },
  "è¥¿ç“œ": { cal: 25, pro: 0.6, fat: 0.2, car: 6.0 },
  "å“ˆå¯†ç“œ": { cal: 34, pro: 0.5, fat: 0.2, car: 8.0 },
  "è±†æµ†": { cal: 30, pro: 2.5, fat: 1.0, car: 1.5 },
  "è±†è…è„‘": { cal: 45, pro: 3.0, fat: 2.0, car: 3.0 },
  "åƒå¼ ": { cal: 260, pro: 24.0, fat: 18.0, car: 3.0 },
  "è…ç«¹": { cal: 459, pro: 44.0, fat: 22.0, car: 16.0 },
  "æ¯›è±†": { cal: 123, pro: 11.0, fat: 5.0, car: 9.0 },
  "é»„è±†": { cal: 359, pro: 35.0, fat: 16.0, car: 30.0 },
  "ç»¿è±†": { cal: 316, pro: 21.0, fat: 1.0, car: 60.0 },
  "çº¢è±†": { cal: 324, pro: 20.0, fat: 0.6, car: 63.0 },
  "èŠ±ç”Ÿ": { cal: 567, pro: 25.0, fat: 49.0, car: 16.0 },
  "è…°æœ": { cal: 553, pro: 18.0, fat: 44.0, car: 27.0 },
  "å¼€å¿ƒæœ": { cal: 628, pro: 20.0, fat: 55.0, car: 18.0 },
  "å·´æ—¦æœ¨": { cal: 605, pro: 21.0, fat: 55.0, car: 12.0 },
  "æ©„æ¦„æ²¹": { cal: 890, pro: 0, fat: 100, car: 0 },
  "èŠ±ç”Ÿæ²¹": { cal: 890, pro: 0, fat: 100, car: 0 },
  "ç‰ç±³æ²¹": { cal: 890, pro: 0, fat: 100, car: 0 },
  "é»„æ²¹": { cal: 717, pro: 0, fat: 81, car: 0 },
  "ç™½ç³–": { cal: 396, pro: 0, fat: 0, car: 99 },
  "çº¢ç³–": { cal: 380, pro: 0, fat: 0, car: 96 },
  "èœ‚èœœ": { cal: 304, pro: 0.3, fat: 0, car: 82 },
  "è–¯ç‰‡": { cal: 536, pro: 7.0, fat: 35.0, car: 49.0 },
  "é¥¼å¹²": { cal: 430, pro: 7.0, fat: 15.0, car: 67.0 },
  "å·§å…‹åŠ›": { cal: 546, pro: 5.0, fat: 32.0, car: 57.0 },
  "è›‹ç³•": { cal: 350, pro: 5.0, fat: 18.0, car: 45.0 },
  "é¢åŒ…": { cal: 280, pro: 8.0, fat: 5.0, car: 50.0 },
  "æ–¹ä¾¿é¢": { cal: 436, pro: 9.0, fat: 20.0, car: 58.0 },
  "ç«è…¿è‚ ": { cal: 212, pro: 10.0, fat: 18.0, car: 3.0 },
  "åˆé¤è‚‰": { cal: 229, pro: 11.0, fat: 20.0, car: 1.0 },
  "å’¸é¸­è›‹": { cal: 190, pro: 12.0, fat: 13.0, car: 4.0 },
  "æ¾èŠ±è›‹": { cal: 131, pro: 11.0, fat: 9.0, car: 2.0 },
  "é…¸å¥¶": { cal: 90, pro: 3.0, fat: 4.0, car: 10.0 },
  "å¥¶é…ª": { cal: 328, pro: 25.0, fat: 25.0, car: 1.3 },
  "å†°æ·‡æ·‹": { cal: 207, pro: 3.0, fat: 11.0, car: 24.0 },
  "å¥¶èŒ¶(å…¨ç³–)": { cal: 180, pro: 1.0, fat: 4.0, car: 32.0 },
  "å¯ä¹": { cal: 42, pro: 0, fat: 0, car: 10.0 },
  "é›ªç¢§": { cal: 49, pro: 0, fat: 0, car: 12.0 },
  "æœæ±": { cal: 50, pro: 0.5, fat: 0, car: 12.0 },
  "å’–å•¡(é»‘)": { cal: 2, pro: 0.3, fat: 0, car: 0.5 },
  "ç»¿èŒ¶": { cal: 1, pro: 0.2, fat: 0, car: 0.3 },
  "çº¢èŒ¶": { cal: 1, pro: 0.2, fat: 0, car: 0.3 },
  "æ°´é¥º": { cal: 200, pro: 8.0, fat: 8.0, car: 25.0 },
  "é¦„é¥¨": { cal: 150, pro: 7.0, fat: 5.0, car: 18.0 },
  "åŒ…å­(è‚‰)": { cal: 230, pro: 8.0, fat: 10.0, car: 28.0 },
  "åŒ…å­(èœ)": { cal: 150, pro: 5.0, fat: 3.0, car: 25.0 },
  "çƒ§éº¦": { cal: 230, pro: 6.0, fat: 8.0, car: 34.0 },
  "æ²¹æ¡": { cal: 380, pro: 7.0, fat: 22.0, car: 40.0 },
  "ç…é¥¼æœå­": { cal: 250, pro: 7.0, fat: 10.0, car: 32.0 },
  "æ‰‹æŠ“é¥¼": { cal: 300, pro: 6.0, fat: 18.0, car: 30.0 },
  "çƒ¤å†·é¢": { cal: 220, pro: 6.0, fat: 8.0, car: 30.0 },
  "ç‚’é¥­": { cal: 180, pro: 5.0, fat: 8.0, car: 22.0 },
  "ç‚’é¢": { cal: 160, pro: 5.0, fat: 7.0, car: 20.0 },
  "èºè›³ç²‰": { cal: 200, pro: 6.0, fat: 8.0, car: 25.0 },
  "ç±³çº¿": { cal: 110, pro: 3.0, fat: 1.0, car: 22.0 },
  "é…¸è¾£ç²‰": { cal: 150, pro: 4.0, fat: 6.0, car: 20.0 },
  "éº»è¾£çƒ«(æ¸…æ±¤)": { cal: 100, pro: 6.0, fat: 3.0, car: 12.0 },
  "ç«é”…(æ¸…æ±¤)": { cal: 120, pro: 8.0, fat: 6.0, car: 8.0 },
  "ç‚¸é¸¡": { cal: 270, pro: 20.0, fat: 20.0, car: 5.0 },
  "è–¯æ¡": { cal: 298, pro: 4.0, fat: 17.0, car: 35.0 },
  "æ±‰å ¡": { cal: 450, pro: 18.0, fat: 25.0, car: 35.0 },
  "æŠ«è¨": { cal: 260, pro: 11.0, fat: 10.0, car: 30.0 },
  "å¯¿å¸": { cal: 120, pro: 4.0, fat: 2.0, car: 20.0 },
  "ä¸‰æ–‡é±¼åˆºèº«": { cal: 142, pro: 20.8, fat: 6.3, car: 0 },
  "é‡‘æªé±¼": { cal: 130, pro: 23.0, fat: 3.0, car: 0 },
  "è™¾æ»‘": { cal: 110, pro: 15.0, fat: 3.0, car: 2.0 },
  "é±¼è±†è…": { cal: 150, pro: 10.0, fat: 8.0, car: 8.0 },
  "ç”œä¸è¾£": { cal: 180, pro: 9.0, fat: 10.0, car: 12.0 },
  "èŸ¹æ£’": { cal: 90, pro: 7.0, fat: 1.0, car: 12.0 },
  "åŸ¹æ ¹": { cal: 300, pro: 15.0, fat: 27.0, car: 1.0 },
  "é¦™è‚ ": { cal: 230, pro: 12.0, fat: 20.0, car: 1.0 },
  "è…Šè‚‰": { cal: 400, pro: 15.0, fat: 38.0, car: 1.0 },
  "è…Šè‚ ": { cal: 450, pro: 14.0, fat: 42.0, car: 2.0 },
  "çº¢çƒ§è‚‰": { cal: 400, pro: 8.0, fat: 40.0, car: 1.0 },
  "å›é”…è‚‰": { cal: 350, pro: 10.0, fat: 35.0, car: 2.0 },
  "å®«ä¿é¸¡ä¸": { cal: 200, pro: 15.0, fat: 12.0, car: 8.0 },
  "é±¼é¦™è‚‰ä¸": { cal: 180, pro: 10.0, fat: 10.0, car: 10.0 },
  "éº»å©†è±†è…": { cal: 150, pro: 8.0, fat: 10.0, car: 5.0 },
  "ç•ªèŒ„ç‚’è›‹": { cal: 120, pro: 8.0, fat: 8.0, car: 4.0 },
  "é’æ¤’è‚‰ä¸": { cal: 160, pro: 12.0, fat: 10.0, car: 4.0 },
  "åœŸè±†ä¸": { cal: 90, pro: 2.0, fat: 5.0, car: 10.0 },
  "åœ°ä¸‰é²œ": { cal: 180, pro: 3.0, fat: 12.0, car: 15.0 },
  "ç‚’é’èœ": { cal: 80, pro: 2.0, fat: 6.0, car: 4.0 },
  "ç™½ç¼èœå¿ƒ": { cal: 60, pro: 2.0, fat: 4.0, car: 4.0 },
  "è’œè“‰è¥¿å…°èŠ±": { cal: 70, pro: 3.0, fat: 4.0, car: 6.0 },
  "å†¬ç“œæ±¤": { cal: 30, pro: 1.0, fat: 1.0, car: 4.0 },
  "ç•ªèŒ„æ±¤": { cal: 40, pro: 1.0, fat: 2.0, car: 5.0 },
  "ç´«èœè›‹èŠ±æ±¤": { cal: 50, pro: 3.0, fat: 3.0, car: 2.0 },
  "é»‘ç±³ç²¥": { cal: 50, pro: 2.0, fat: 0.5, car: 10.0 },
  "å…«å®ç²¥": { cal: 80, pro: 2.0, fat: 0.5, car: 16.0 },
  "é“¶è€³æ±¤": { cal: 60, pro: 0.5, fat: 0.1, car: 14.0 },
  "ç»¿è±†æ±¤": { cal: 50, pro: 1.0, fat: 0.1, car: 11.0 },
  "çº¢è±†æ±¤": { cal: 55, pro: 1.5, fat: 0.1, car: 12.0 },
  "è²å­ç¾¹": { cal: 70, pro: 1.0, fat: 0.1, car: 16.0 },
  "çº¢æ£": { cal: 287, pro: 2.1, fat: 0.8, car: 67.0 },
  "æ¡‚åœ†": { cal: 60, pro: 1.0, fat: 0.1, car: 15.0 },
  "æ¸æ": { cal: 250, pro: 10.0, fat: 5.0, car: 50.0 },
  "å±±è¯": { cal: 57, pro: 1.5, fat: 0.2, car: 12.0 },
  "èŠ‹å¤´": { cal: 77, pro: 1.7, fat: 0.2, car: 17.0 },
  "è±è§’": { cal: 100, pro: 3.0, fat: 0.1, car: 21.0 },
  "è²è—•": { cal: 70, pro: 1.9, fat: 0.1, car: 15.0 },
  "è¸è ": { cal: 59, pro: 1.2, fat: 0.2, car: 13.0 },
  "ç™¾åˆ": { cal: 166, pro: 3.2, fat: 0.1, car: 38.0 },
  "è²å­": { cal: 350, pro: 17.0, fat: 2.0, car: 67.0 },
  "èŠ¡å®": { cal: 350, pro: 8.0, fat: 0.3, car: 75.0 },
  "è–ç±³": { cal: 370, pro: 12.0, fat: 4.0, car: 69.0 },
  "ç³™ç±³": { cal: 340, pro: 8.0, fat: 3.0, car: 70.0 },
  "è—œéº¦": { cal: 368, pro: 14.0, fat: 6.0, car: 64.0 },
  "èéº¦é¢": { cal: 340, pro: 12.0, fat: 3.0, car: 68.0 },
  "èœé¢": { cal: 330, pro: 14.0, fat: 2.0, car: 65.0 },
  "ç²‰ä¸": { cal: 335, pro: 0.8, fat: 0.2, car: 83.0 },
  "ç²‰æ¡": { cal: 330, pro: 0.5, fat: 0.2, car: 82.0 },
  "å®½ç²‰": { cal: 320, pro: 0.5, fat: 0.2, car: 80.0 }
};

let meals = { breakfast: [], lunch: [], dinner: [], snack: [] };
let currentFood = "";
let weightRecords = JSON.parse(localStorage.getItem("weightRecords") || "[]");
let userInfo = JSON.parse(localStorage.getItem("userInfo") || "{}");
let customName = localStorage.getItem("customName") || "æˆ‘çš„è¥å…»å°ç®¡å®¶";
let iconSet = ["ğŸ½ï¸","ğŸ¥—","ğŸ","ğŸš","ğŸ¥©","ğŸ¥¦","ğŸ©","â˜•"];
let iconIndex = 0;

function loadSettings() {
  document.getElementById("appTitle").innerText = customName;
  document.title = custom